<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:CHROMA.ViewModels"
			 x:DataType="vm:CreateViewModel"
			 x:Class="CHROMA.Views.CreatePage"
			 Title="Create">

	<ScrollView>
		<VerticalStackLayout Padding="16" Spacing="16">

			<!-- Section 1: Color Input -->
			<Border Padding="12" StrokeThickness="1" Stroke="LightGray">
				<VerticalStackLayout Spacing="8">
					<Label Text="Base Color" FontAttributes="Bold" />
					<Entry Text="{Binding BaseHex}" Placeholder="#RRGGBB" />
					<Label Text="{Binding BaseHexPreview}" FontSize="12" />
					<BoxView HeightRequest="40" Color="{Binding BaseColor}" />
					<Label Text="{Binding StatusMessage}" FontSize="11" TextColor="DarkRed" />
				</VerticalStackLayout>
			</Border>

			<!-- Section 2: Harmony Selection & Swatch Results -->
			<Border Padding="12" StrokeThickness="1" Stroke="LightGray">
				<VerticalStackLayout Spacing="8">
					<Label Text="Harmony Scheme" FontAttributes="Bold"/>
					<Picker ItemsSource="{Binding Schemes}"
							SelectedItem="{Binding SelectedScheme}" />

					<Button Text="Generate" Command="{Binding GenerateCommand}" />

					<!-- Cards list -->
					<CollectionView ItemsSource="{Binding Palette}"
									Margin="0,12,0,0">
						<CollectionView.ItemTemplate>
							<DataTemplate x:DataType="vm:ColorSlotViewModel">
								<Grid ColumnDefinitions="60,*,Auto"
									  RowDefinitions="Auto,Auto">
									<BoxView Grid.RowSpan="2"
											 Grid.Column="0"
											 Margin="0,0,8,0"
											 Color="{Binding Color}" />
									<Label Grid.Column="1"
										   Text="{Binding Label}" />
									<Label Grid.Column="1" Grid.Row="1"
										   FontSize="11"
										   Text="{Binding Color, Converter={StaticResource ColorToHexConverter}}" />
								</Grid>
							</DataTemplate>
						</CollectionView.ItemTemplate>
					</CollectionView>
				</VerticalStackLayout>
			</Border>

			<!-- Section 3: Visualization -->
			<Border Padding="12" StrokeThickness="1" Stroke="LightGray">
				<VerticalStackLayout Spacing="8">
					<Label Text="Fine-tune Saturation / Lightness"
                       FontAttributes="Bold" />
					<CollectionView ItemsSource="{Binding Palette}">
						<CollectionView.ItemTemplate>
							<DataTemplate x:DataType="vm:ColorSlotViewModel">
								<VerticalStackLayout Spacing="4">
									<Label Text="{Binding Label}" />
									<BoxView HeightRequest="24" Color="{Binding Color}" />
									<Label Text="Saturation" FontSize="11" />
									<Slider Minimum="0" Maximum="1"
                                        Value="{Binding Saturation}" />
									<Label Text="Lightness" FontSize="11" />
									<Slider Minimum="0" Maximum="1"
                                        Value="{Binding Lightness}" />
								</VerticalStackLayout>
							</DataTemplate>
						</CollectionView.ItemTemplate>
					</CollectionView>
				</VerticalStackLayout>
			</Border>

			<!-- Section 4: Simple export block -->
			<Border Padding="12" StrokeThickness="1" Stroke="LightGray">
				<VerticalStackLayout Spacing="8">
					<Button Text="Export JSON" Command="{Binding ExportJsonCommand}" />
					<Editor Text="{Binding ExportJson}"
                        AutoSize="TextChanges"
                        IsReadOnly="True"
                        HeightRequest="120" />
				</VerticalStackLayout>
			</Border>

		</VerticalStackLayout>
	</ScrollView>
</ContentPage>